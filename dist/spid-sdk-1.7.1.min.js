/*! sdk-js - v1.7.1 - 2013-06-05
* Copyright (c) 2013 Schibsted Payment AS; */
"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var o,n,i,r,s,a=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?l+"":"null";case"boolean":case"null":return l+"";case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,o=0;r>o;o+=1)s[o]=str(o,l)||"null";return i=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,i}if(rep&&"object"==typeof rep)for(r=rep.length,o=0;r>o;o+=1)"string"==typeof rep[o]&&(n=rep[o],i=str(n,l),i&&s.push(quote(n)+(gap?": ":":")+i));else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(i=str(n,l),i&&s.push(quote(n)+(gap?": ":":")+i));return i=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,o){var n;if(gap="",indent="","number"==typeof o)for(n=0;o>n;n+=1)indent+=" ";else"string"==typeof o&&(indent=o);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var o,n,i=e[t];if(i&&"object"==typeof i)for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n=walk(i,o),void 0!==n?i[o]=n:delete i[o]);return reviver.call(e,t,i)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var VGS=VGS||{client_id:!1,redirect_uri:""+window.location,_session:null,_sessionInitiated:!1,_userStatus:"unknown",_logging:!1,_prod:!0,_varnish_expiration:!1,_refresh_timeout:9e5,_timeout:5e3,_cache:!0,_cache_notloggedin:!1,_cacheLastReset:(new Date).getTime(),_track_throttle:1,callbacks:[],cachedResponses:[],guid:function(){return"f"+(Math.random()*(1<<30)).toString(16).replace(".","")},copy:function(e,t,o,n){for(var i in t)(o||e[i]===void 0)&&(e[i]=n?n(t[i]):t[i]);return e},init:function(e){var t=!0;if(e=VGS.copy(e||{},{cache:VGS._cache,cache_notloggedin:VGS._cache_notloggedin,prod:VGS._prod,varnish_expiration:VGS._varnish_expiration,refresh_timeout:VGS._refresh_timeout,logging:VGS._logging,timeout:VGS._timeout,track_throttle:VGS._track_throttle,cookie:!0,status:!1,https:!0}),(!e.logging&&0>(""+window.location).indexOf("vgs_debug=1")||!window.console)&&(VGS._logging=!1),e.refresh_timeout>=6e4&&(VGS._refresh_timeout=e.refresh_timeout),VGS.Cookie.enabled=e.cookie,VGS._prod=e.prod,VGS._varnish_expiration=e.varnish_expiration,VGS._cache=e.cache,VGS._cache_notloggedin=e.cache_notloggedin,VGS.Ajax.timeoutPeriod=e.timeout,VGS._track_throttle=e.track_throttle,VGS.log('Default connection timeout set to ("'+VGS.Ajax.timeoutPeriod+'")',"log"),e.client_id===void 0&&(VGS.log("VGS.init: client_id is missing!","error"),t=!1),e.server===void 0&&(VGS.log("VGS.init: server is missing!","error"),t=!1),t){VGS.client_id=e.client_id,VGS.Ajax.serverUrl=(e.https?"https":"http")+"://"+e.server+"/",VGS._prod?(VGS.Ajax.sessionUrl=(e.https?"https":"http")+"://session."+e.server+"/rpc/hasSession.js",VGS.Cookie.name="vgs_js_"+VGS.client_id):(VGS.Ajax.sessionUrl=(e.https?"https":"http")+"://"+e.server+"/ajax/hasSession.js",VGS.Cookie.name="vgs_js_test_"+VGS.client_id),VGS.log('VGS.init("'+VGS.client_id+", "+VGS.Ajax.serverUrl+'")',"log");var o=null,n=null;if(VGS.Cookie.enabled&&(n=VGS.Cookie.get()),null!=e.session?(VGS.log("VGS.init: Session object provided! Expires in "+e.session.expiresIn+" seconds","log"),o=e.session):null!=n?(VGS.log("VGS.init: Cookie set! Expires in "+n.expiresIn+" seconds","log"),o=n,VGS.Auth._loadState="loaded"):VGS.log("VGS.init: No session set! Status unknown.","log"),"object"==typeof o&&null!=o){var i=parseInt(VGS.Ajax.now(),10),r=parseInt(1e3*o.expiresIn,10);if(o.clientTime!==void 0){var s=parseInt((o.clientTime+r-i)/1e3,10);o.expiresIn="number"==typeof s&&s>0?s:o.expiresIn,VGS.log("VGS.init: Session expiration updated to "+o.expiresIn+" seconds","log")}VGS.Auth.setSession(o,o.userStatus!==void 0?o.userStatus:"unknown"),e.status===!0&&VGS.getLoginStatus()}else(e.status||null===o)&&VGS.getLoginStatus()}},processing:function(e){VGS.log('VGS.processing("'+e+'")',"log")},log:function(e,t){VGS._logging&&("error"===t?VGS.Event&&("string"==typeof e&&(e={type:"default",description:e,code:400}),VGS.Event.fire("VGS.error",e)):window.console&&window.console.log(e)),VGS.Event&&VGS.Event.fire("VGS.log",e)},Ajax:{connectionId:-1,connections:[],interval:null,intervalPeriod:300,pollingDebugCount:0,pollingDebugFirst:!0,pollingDebugThrottle:100,requestQueue:[],scriptObject:null,serverUrl:"",sessionUrl:"",timeoutPeriod:5e3,version:"1.0",getFragmentFromUrl:function(e){e=e||window.location.href,VGS.log('VGS.Ajax.getFragmentFromUrl("'+e+'")',"log");var t=e.replace(/^[^#]*#?(.*)$/,"$1");return VGS.log("-- complete fragment: "+t,"log"),t},buildConnectionUrl:function(e){VGS.log('VGS.Ajax.buildConnectionUrl("'+e+'")',"log"),VGS.Ajax.connectionId=VGS.Ajax.connections.length;var t=("http"===e.substr(0,4)?e:VGS.Ajax.serverUrl+e)+"&connectionId="+VGS.Ajax.connectionId+"&client_id="+VGS.client_id+"&redirect_uri="+encodeURIComponent(VGS.redirect_uri);VGS.log("-- built url: ["+t+"]","log"),VGS.Ajax.requestQueue[VGS.Ajax.requestQueue.length]=new VGS.Ajax.requestQueueNode(t)},buildUrl:function(e,t){var o=[];for(var n in t)t[n]&&o.push(n+"="+t[n]);var i=VGS.Ajax.serverUrl+e+"?"+o.join("&");return VGS.log("-- built url: ["+i+"]","log"),i},createScriptObject:function(e){VGS.log('VGS.Ajax.createScriptObject("'+e+'")',"log"),VGS.Ajax.scriptObject=document.createElement("SCRIPT"),VGS.Ajax.scriptObject.src=e,VGS.Ajax.scriptObject.type="text/javascript",VGS.Ajax.scriptObject.onerror=VGS.Ajax.loadingError;var t=document.getElementsByTagName("HEAD")[0];t.appendChild(VGS.Ajax.scriptObject)},failure:function(e){VGS.log('VGS.Ajax.failure("'+e+'")',"log"),VGS.Event&&VGS.Event.fire("VGS.error",{type:"communication",code:503,description:e})},flushQueue:function(){VGS.log("VGS.Ajax.flushQueue()","log"),VGS.Ajax.requestQueue.length=0},makeRequest:function(){if(VGS.log("VGS.Ajax.makeRequest()","log"),VGS.Ajax.requestQueue.length>0){VGS.processing("on");var e=VGS.Ajax.requestQueue[0].connectionUrl;parent.triggerResponse=null,VGS.Ajax.createScriptObject(e),VGS.Ajax.serverTimeoutTime=VGS.Ajax.now()+VGS.Ajax.timeoutPeriod}},now:function(){return VGS.log("VGS.Ajax.now()","log"),(new Date).getTime()},poll:function(){VGS.log("VGS.Ajax.poll()","log"),VGS.Ajax.pollingDebugCount===VGS.Ajax.pollingDebugThrottle?(VGS.log("-- poll ["+VGS.Ajax.now()+"] (x"+VGS.Ajax.pollingDebugCount+")","log"),VGS.Ajax.pollingDebugCount=0):VGS.Ajax.pollingDebugFirst&&(VGS.log("-- poll ["+VGS.Ajax.now()+"]","log"),VGS.Ajax.pollingDebugFirst=!1,VGS.Ajax.pollingDebugCount=0),VGS.Ajax.pollingDebugCount++,VGS.Ajax.serverTimeoutTime?VGS.Ajax.serverTimeoutTime<=VGS.Ajax.now()?(VGS.Ajax.stopPolling(),VGS.Ajax.failure("Server Timed Out")):null!=parent.triggerResponse&&parent.triggerResponse():VGS.Ajax.requestQueue.length>0?VGS.Ajax.requestQueue.length>10?(VGS.Ajax.failure("Queue size too big: "+VGS.Ajax.requestQueue.length+" requests! In order to avoid abuse and overload of the platform we allow max 10 requests in the queue."),VGS.Ajax.stopPolling()):VGS.Ajax.makeRequest():VGS.Ajax.stopPolling()},removeScriptObject:function(){VGS.log("VGS.Ajax.removeScriptObject()","log"),VGS.Ajax.scriptObject.parentNode.removeChild(VGS.Ajax.scriptObject),VGS.Ajax.scriptObject=null},requestQueueNode:function(e){VGS.log('VGS.Ajax.requestQueueNode("'+e+'")',"log"),this.connectionUrl=e,this.requestSent=!1},responseReceived:function(){VGS.log("VGS.Ajax.responseReceived()","log"),VGS.processing("off"),VGS.Ajax.requestQueue.shift(),VGS.Ajax.serverTimeoutTime=null,VGS.Ajax.removeScriptObject()},send:function(e){VGS.log('VGS.Ajax.send("'+e+'")',"log"),VGS.Ajax.buildConnectionUrl(e),VGS.Ajax.startPolling()},startPolling:function(){VGS.log("VGS.Ajax.startPolling()","log"),null==VGS.Ajax.interval&&(VGS.log("polling (re)started"),VGS.Ajax.connections[VGS.Ajax.connectionId]=null,VGS.Ajax.poll(),VGS.Ajax.interval=window.setInterval(function(){VGS.Ajax.connections[VGS.Ajax.connectionId]=null,VGS.Ajax.poll()},VGS.Ajax.intervalPeriod))},stopPolling:function(){VGS.log("VGS.Ajax.stopPolling()","log"),VGS.Ajax.serverTimeoutTime=null,VGS.Ajax.flushQueue(),VGS.Ajax.interval&&window.clearInterval(VGS.Ajax.interval),VGS.Ajax.interval=null},success:function(e){e.success?VGS.log("SUCCESS: "+e.success,"log"):e.error&&(VGS.log("ERROR: "+e.error,"log"),VGS.Event&&VGS.Event.fire("VGS.error",{type:"response",code:400,description:e.error}))},loadingError:function(){VGS.log("VGS.Ajax.loadingError()","log"),VGS.Ajax.stopPolling(),VGS.Ajax.failure("Server Timed Out")}},Cookie:{enabled:!0,name:"",domain:"",decode:function(e){return JSON.parse(window.unescape(e))},encode:function(e){return window.escape(JSON.stringify(e))},set:function(e){return VGS.log("VGS.Cookie.set()","log"),e?(VGS.Cookie.setRaw(VGS.Cookie.encode(e),e.expiresIn,e.baseDomain,VGS.Cookie.name),e.sp_id&&(VGS._varnish_expiration||(VGS._varnish_expiration=e.expiresIn),VGS.Cookie.setRaw(e.sp_id,VGS._varnish_expiration,e.baseDomain,"SP_ID"))):VGS.Cookie.clear(),e},get:function(){VGS.log("VGS.Cookie.get() -- "+VGS.Cookie.name,"log");var e,t,o,n=null;o=VGS.Cookie.name+"=",n=document.cookie.split(";");for(var i=0;n.length>i;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1,r.length);0===r.indexOf(o)&&(e=r.substring(o.length,r.length))}return e&&(t=VGS.Cookie.decode(e),t.expiresIn=parseInt(t.expiresIn,10),t.clientTime=parseInt(t.clientTime,10),VGS.Cookie.domain=t.baseDomain),t},setRaw:function(e,t,o,n){VGS.log("VGS.Cookie.setRaw(val, "+t+", "+o+", "+n+")","log");var i="";if(n===void 0&&(n=VGS.Cookie.name),VGS.Cookie.domain=o,t!==void 0){var r=new Date;r.setTime(r.getTime()+1e3*t),i="; expires="+r.toGMTString(),document.cookie=n+"="+e+i+"; path=/"+(o?"; domain=."+o:"")}else VGS.log("VGS.Cookie.setRaw() expiration is invalid:"+t+", no cookie set)","log")},clear:function(){VGS.log("VGS.Cookie.clear() "+VGS.Cookie.name,"log"),VGS.Cookie.setRaw("",0,VGS.Cookie.domain),VGS.log("VGS.Cookie.clear() SP_ID","log"),VGS.Cookie.setRaw("",0,VGS.Cookie.domain,"SP_ID")}},Auth:{valid:!1,logout:function(e){VGS.log("VGS.Auth.logout","log"),VGS.Auth.setSession(null,"unknown");var t="";"function"==typeof e&&(t=VGS.guid(),VGS.callbacks[t]=e),VGS.Ajax.send("ajax/logout.js?callback="+t)},validate:function(e){VGS.log("VGS.Auth.validate","log"),VGS.Auth.valid=!1,e.result?(VGS.Auth.valid=e.result,VGS.log("SUCCESS: "+VGS.Auth.valid,"log"),VGS.Auth.valid&&e.userId!==void 0?(VGS.log("-- valid session, allow login","log"),VGS.Auth.setSession(e,e.userStatus!==void 0?e.userStatus:"unknown")):(VGS.log("-- invalid session, do not allow login","log"),VGS.Auth.setSession(null,"unknown"))):e.error&&e.response?"LoginException"===e.error.type?(VGS.log(e.error,"log"),VGS.Event.fire("VGS.loginException",e)):(VGS.log(e.error,"error"),VGS._cache_notloggedin?(e.response.expiresIn=parseInt(VGS._refresh_timeout,10)/1e3,VGS.Auth.setSession(e.response,"unknown")):VGS.Auth.setSession(null,"unknown")):(VGS.log(e,"error"),VGS.Auth.setSession(null,"unknown"))},setSession:function(e,t){VGS.log("VGS.Auth.setSession ("+typeof e+" , "+t+")","log");var o=!1,n=!1;"object"==typeof e&&null!==e&&e.hasOwnProperty("userId")&&(o=!0),"object"==typeof VGS._session&&null!==VGS._session&&VGS._session.hasOwnProperty("userId")&&(n=!0);var i=!n&&o,r=n&&!o,s=!n&&!o,a=n&&o&&VGS._session.id!==e.id,l=i||r||n&&o&&VGS._session.sig!==e.sig||s,u=t!==VGS._userStatus,c={session:e,status:t};return"object"==typeof e&&null!==e&&(e.clientTime=parseInt(VGS.Ajax.now(),10)),VGS._session=e,VGS._userStatus=t,l&&VGS.Cookie.enabled&&VGS.Cookie.set(e),s&&VGS.Event.fire("auth.notLoggedin",c),u&&VGS.Event.fire("auth.statusChange",c),(r||a)&&VGS.Event.fire("auth.logout",c),(i||a)&&VGS.Event.fire("auth.login",c),l&&VGS.Event.fire("auth.sessionChange",c),a&&VGS.Event.fire("auth.userChange",c),o&&!VGS._sessionInitiated&&(VGS._sessionInitiated=!0,VGS.Event.fire("auth.sessionInit",c)),VGS.Auth._refreshTimer&&(window.clearTimeout(VGS.Auth._refreshTimer),delete VGS.Auth._refreshTimer),VGS.Auth._loadState&&e&&e.expiresIn&&(VGS.log("--  refresh every "+VGS._refresh_timeout+" milliseconds","log"),VGS.Auth._refreshTimer=window.setTimeout(function(){VGS.getLoginStatus(null,!0)},VGS._refresh_timeout)),c}},getSession:function(){return VGS.log("VGS.getSession","log"),VGS._session},getLoginStatus:function(e,t){if(VGS.log("VGS.getLoginStatus("+e+","+t+")","log"),!VGS.client_id)return VGS.log("ERROR: VGS.getLoginStatus() called before calling VGS.init().","error"),void 0;t=t===!0;var o;if(e){if(!t&&"loaded"===VGS.Auth._loadState)return VGS.log("VGS.getLoginStatus(): status has already been loaded! "+VGS.Auth._loadState,"log"),e({status:VGS._userStatus,session:VGS._session}),void 0;VGS.log("VGS.Event.subscribe(VGS.loginStatus) "+VGS.Auth._loadState,"log"),"function"==typeof e?(o=VGS.guid(),VGS.callbacks[o]=e,VGS.Event.subscribe("VGS.loginStatus",VGS.callbacks[o])):VGS.Event.subscribe("VGS.loginStatus",e)}if(!t&&"loading"===VGS.Auth._loadState)return VGS.log("VGS.getLoginStatus() already loading, returning..."+VGS.Auth._loadState,"log"),void 0;VGS.Auth._loadState="loading";var n=function(e){VGS.log("VGS.callbacks -- "+VGS.Auth._loadState,"log"),VGS.Auth._loadState="loaded",VGS.Auth.validate(e),VGS.Event.fire("VGS.loginStatus",e),VGS.Event.clear("VGS.loginStatus")};o=VGS.guid(),VGS.callbacks[o]=n,VGS.Event.subscribe("VGS.loginException",function(){o=VGS.guid(),VGS.callbacks[o]=function(e){VGS.log("VGS.callbacks -- "+VGS.Auth._loadState,"log"),VGS.Auth._loadState="loaded",VGS.Auth.validate(e),VGS.Event.fire("VGS.loginStatus",e),VGS.Event.clear("VGS.loginStatus")},VGS.Event.clear("VGS.loginException"),VGS.Ajax.send("ajax/hasSession.js?callback="+o+"&autologin=1")}),VGS.Ajax.send(VGS.Ajax.sessionUrl+"?callback="+o)},hasProduct:function(e,t,o){if(VGS.log("VGS.hasProduct("+e+")","log"),!VGS.client_id)return VGS.log("ERROR: VGS.hasProduct() called before calling VGS.init().","error"),void 0;o=o===!0;var n=(new Date).getTime();if(n>VGS._cacheLastReset+VGS._refresh_timeout&&(VGS.log("VGS.hasProduct("+e+"): Cache timedout, forcing request.","log"),o=!0),!o&&"object"==typeof VGS.cachedResponses["prd_"+e]&&null!==VGS.cachedResponses["prd_"+e])return VGS.log("VGS.hasProduct("+e+"): Product cached.","log"),t(VGS.cachedResponses["prd_"+e]),void 0;VGS.log("VGS.hasProduct("+e+"): Product NOT cached.","log");var i=function(o){VGS.cachedResponses["prd_"+e]=o,VGS._cacheLastReset=(new Date).getTime(),t(o)},r=VGS.guid();VGS.callbacks[r]=i,VGS.Ajax.send("ajax/hasproduct.js?product_id="+e+"&callback="+r)},hasSubscription:function(e,t,o){if(VGS.log("VGS.hasSubscription("+e+")","log"),!VGS.client_id)return VGS.log("ERROR: VGS.hasSubscription() called before calling VGS.init().","error"),void 0;o=o===!0;var n=(new Date).getTime();if(n>VGS._cacheLastReset+VGS._refresh_timeout&&(VGS.log("VGS.hasSubscription("+e+"): Cache timedout, forcing request.","log"),o=!0),!o&&"object"==typeof VGS.cachedResponses["sub_"+e]&&null!==VGS.cachedResponses["sub_"+e])return VGS.log("VGS.hasSubscription("+e+"): Product cached.","log"),t(VGS.cachedResponses["sub_"+e]),void 0;VGS.log("VGS.hasSubscription("+e+"): Product NOT cached.","log");var i=function(o){VGS.cachedResponses["sub_"+e]=o,VGS._cacheLastReset=(new Date).getTime(),t(o)},r=VGS.guid();VGS.callbacks[r]=i,VGS.Ajax.send("ajax/hassubscription.js?product_id="+e+"&callback="+r)},getLoginURI:function(e,t){var o={response_type:"code",flow:"signup",client_id:t||VGS.client_id,redirect_uri:encodeURIComponent(e||""+window.location)};return VGS.Ajax.buildUrl("login",o)},getSignupURI:function(e,t){var o={response_type:"code",flow:"signup",client_id:t||VGS.client_id,redirect_uri:encodeURIComponent(e||""+window.location)};return VGS.Ajax.buildUrl("signup",o)},getLogoutURI:function(e,t){var o={response_type:"code",client_id:t||VGS.client_id,redirect_uri:encodeURIComponent(e||""+window.location)};return VGS.Ajax.buildUrl("logout",o)},getAccountURI:function(e,t){var o={response_type:"code",client_id:t||VGS.client_id,redirect_uri:encodeURIComponent(e||""+window.location)};return VGS.Ajax.buildUrl("account/summary",o)},getPurchaseHistoryURI:function(e,t){var o={response_type:"code",client_id:t||VGS.client_id,redirect_uri:encodeURIComponent(e||""+window.location)};return VGS.Ajax.buildUrl("account/purchasehistory",o)},getSubscriptionsURI:function(e,t){var o={response_type:"code",client_id:t||VGS.client_id,redirect_uri:encodeURIComponent(e||""+window.location)};return VGS.Ajax.buildUrl("account/subscriptions",o)},getProductsURI:function(e,t){var o={response_type:"code",client_id:t||VGS.client_id,redirect_uri:encodeURIComponent(e||""+window.location)};return VGS.Ajax.buildUrl("account/products",o)},getRedeemVoucherURI:function(e,t,o){var n={response_type:"code",client_id:o||VGS.client_id,redirect_uri:encodeURIComponent(t||""+window.location),voucher_code:e||null};return VGS.Ajax.buildUrl("account/redeem",n)},getPurchaseProductURI:function(e,t,o){var n={response_type:"code",flow:"payment",client_id:o||VGS.client_id,redirect_uri:encodeURIComponent(t||""+window.location),product_id:e||null};return VGS.Ajax.buildUrl("auth/start",n)},getPurchaseCampaignURI:function(e,t,o,n,i){var r={response_type:"code",flow:"payment",client_id:i||VGS.client_id,redirect_uri:encodeURIComponent(n||""+window.location),campaign_id:e||null,product_id:t||null,voucher_code:o||null};return VGS.Ajax.buildUrl("auth/start",r)},Event:{subscribers:function(){return this._subscribersMap||(this._subscribersMap={}),this._subscribersMap},subscribe:function(e,t){var o=this.subscribers();o[e]?o[e].push(t):o[e]=[t]},unsubscribe:function(e,t){var o=this.subscribers()[e];VGS.Array.forEach(o,function(e,n){e===t&&(o[n]=null)})},monitor:function(e,t){if(!t()){var o=this,n=function(){t.apply(t,arguments)&&o.unsubscribe(e,n)};this.subscribe(e,n)}},clear:function(e){delete this.subscribers()[e]},fire:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();VGS.Array.forEach(this.subscribers()[t],function(o){o&&(VGS.log('VGS.Event.fire("'+t+'")',"log"),o.apply(this,e))})}},Array:{forEach:function(e,t,o){if(e)if("[object Array]"!==Object.prototype.toString.apply(e)&&(e instanceof Function||"number"!=typeof e.length))for(var n in e)(o||e.hasOwnProperty(n))&&t(e[n],n,e);else if(e.forEach)e.forEach(t);else for(var i=0,r=e.length;r>i;i++)t(e[i],i,e)}}};window.setTimeout(function(){"function"!=typeof window.vgsAsyncInit||window.vgsAsyncInit.hasRun||(window.vgsAsyncInit.hasRun=!0,window.vgsAsyncInit())},0);