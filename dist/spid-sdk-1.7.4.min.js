/*! sdk-js - v1.7.4 - 2014-02-11
* Copyright (c) 2014 Schibsted Payment AS; */
"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var VGS=VGS||{version:"1.7.4",client_id:!1,redirect_uri:window.location.toString(),_session:null,_sessionInitiated:!1,_userStatus:"unknown",_logging:!1,_prod:!0,_varnish_expiration:!1,_refresh_timeout:9e5,_timeout:5e3,_cache:!0,_cache_notloggedin:!1,_cacheLastReset:(new Date).getTime(),_track_throttle:1,callbacks:[],cachedResponses:[],guid:function(){return"f"+(Math.random()*(1<<30)).toString(16).replace(".","")},copy:function(a,b,c,d){for(var e in b)(c||"undefined"==typeof a[e])&&(a[e]=d?d(b[e]):b[e]);return a},init:function(a){var b=!0;if(a=VGS.copy(a||{},{cache:VGS._cache,cache_notloggedin:VGS._cache_notloggedin,prod:VGS._prod,varnish_expiration:VGS._varnish_expiration,refresh_timeout:VGS._refresh_timeout,logging:VGS._logging,timeout:VGS._timeout,track_throttle:VGS._track_throttle,cookie:!0,status:!1,https:!0}),VGS._logging=a.logging,(!a.logging&&window.location.toString().indexOf("vgs_debug=1")<0||!window.console)&&(VGS._logging=!1),a.refresh_timeout>=6e4&&(VGS._refresh_timeout=a.refresh_timeout),VGS.Cookie.enabled=a.cookie,VGS._prod=a.prod,VGS._varnish_expiration=a.varnish_expiration,VGS._cache=a.cache,VGS._cache_notloggedin=a.cache_notloggedin,VGS.Ajax.timeoutPeriod=a.timeout,VGS._track_throttle=a.track_throttle,VGS.log('Default connection timeout set to ("'+VGS.Ajax.timeoutPeriod+'")',"log"),"undefined"==typeof a.client_id&&(VGS.log("VGS.init: client_id is missing!","error"),b=!1),"undefined"==typeof a.server&&(VGS.log("VGS.init: server is missing!","error"),b=!1),b){VGS.client_id=a.client_id,VGS.Ajax.serverUrl=(a.https?"https":"http")+"://"+a.server+"/",VGS._prod?(VGS.Ajax.sessionUrl=(a.https?"https":"http")+"://session."+a.server+"/rpc/hasSession.js",VGS.Cookie.name="vgs_js_"+VGS.client_id):(VGS.Ajax.sessionUrl=(a.https?"https":"http")+"://"+a.server+"/ajax/hasSession.js",VGS.Cookie.name="vgs_js_test_"+VGS.client_id),VGS.log('VGS.init("'+VGS.client_id+", "+VGS.Ajax.serverUrl+'")',"log");var c=null,d=null;if(VGS.Cookie.enabled&&(d=VGS.Cookie.get()),null!=a.session?(VGS.log("VGS.init: Session object provided! Expires in "+a.session.expiresIn+" seconds","log"),c=a.session):null!=d?(VGS.log("VGS.init: Cookie set! Expires in "+d.expiresIn+" seconds","log"),c=d,VGS.Auth._loadState="loaded"):VGS.log("VGS.init: No session set! Status unknown.","log"),"object"==typeof c&&null!=c){var e=parseInt(VGS.Ajax.now(),10),f=parseInt(1e3*c.expiresIn,10);if("undefined"!=typeof c.clientTime){var g=parseInt((c.clientTime+f-e)/1e3,10);c.expiresIn="number"==typeof g&&g>0?g:c.expiresIn,VGS.log("VGS.init: Session expiration updated to "+c.expiresIn+" seconds","log")}VGS.Auth.setSession(c,"undefined"!=typeof c.userStatus?c.userStatus:"unknown"),a.status===!0&&VGS.getLoginStatus()}else(a.status||null===c)&&VGS.getLoginStatus()}},processing:function(a){VGS.log('VGS.processing("'+a+'")',"log")},log:function(a,b){VGS._logging&&("error"===b?VGS.Event&&("string"==typeof a&&(a={type:"default",description:a,code:400}),VGS.Event.fire("VGS.error",a)):window.console&&window.console.log(a)),VGS.Event&&VGS.Event.fire("VGS.log",a)},Ajax:{connectionId:-1,connections:[],interval:null,intervalPeriod:300,pollingDebugCount:0,pollingDebugFirst:!0,pollingDebugThrottle:100,requestQueue:[],scriptObject:null,serverUrl:"",sessionUrl:"",timeoutPeriod:5e3,version:"1.0",getFragmentFromUrl:function(a){a=a||window.location.href,VGS.log('VGS.Ajax.getFragmentFromUrl("'+a+'")',"log");var b=a.replace(/^[^#]*#?(.*)$/,"$1");return VGS.log("-- complete fragment: "+b,"log"),b},buildConnectionUrl:function(a){VGS.log('VGS.Ajax.buildConnectionUrl("'+a+'")',"log"),VGS.Ajax.connectionId=VGS.Ajax.connections.length;var b=("http"===a.substr(0,4)?a:VGS.Ajax.serverUrl+a)+"&connectionId="+VGS.Ajax.connectionId+"&client_id="+VGS.client_id+"&redirect_uri="+encodeURIComponent(VGS.redirect_uri);VGS.log("-- built url: ["+b+"]","log"),VGS.Ajax.requestQueue[VGS.Ajax.requestQueue.length]=new VGS.Ajax.requestQueueNode(b)},buildUrl:function(a,b){var c=[];for(var d in b)b[d]&&c.push(d+"="+b[d]);var e=VGS.Ajax.serverUrl+a+"?"+c.join("&");return VGS.log("-- built url: ["+e+"]","log"),e},createScriptObject:function(a){VGS.log('VGS.Ajax.createScriptObject("'+a+'")',"log"),VGS.Ajax.scriptObject=document.createElement("SCRIPT"),VGS.Ajax.scriptObject.src=a,VGS.Ajax.scriptObject.type="text/javascript",VGS.Ajax.scriptObject.onerror=VGS.Ajax.loadingError;var b=document.getElementsByTagName("HEAD")[0];b.appendChild(VGS.Ajax.scriptObject)},failure:function(a){VGS.log('VGS.Ajax.failure("'+a+'")',"log"),VGS.Event&&VGS.Event.fire("VGS.error",{type:"communication",code:503,description:a})},flushQueue:function(){VGS.log("VGS.Ajax.flushQueue()","log"),VGS.Ajax.requestQueue.length=0},makeRequest:function(){if(VGS.log("VGS.Ajax.makeRequest()","log"),VGS.Ajax.requestQueue.length>0){VGS.processing("on");var a=VGS.Ajax.requestQueue[0].connectionUrl;parent.triggerResponse=null,VGS.Ajax.createScriptObject(a),VGS.Ajax.serverTimeoutTime=VGS.Ajax.now()+VGS.Ajax.timeoutPeriod}},now:function(){return VGS.log("VGS.Ajax.now()","log"),(new Date).getTime()},poll:function(){VGS.log("VGS.Ajax.poll()","log"),VGS.Ajax.pollingDebugCount===VGS.Ajax.pollingDebugThrottle?(VGS.log("-- poll ["+VGS.Ajax.now()+"] (x"+VGS.Ajax.pollingDebugCount+")","log"),VGS.Ajax.pollingDebugCount=0):VGS.Ajax.pollingDebugFirst&&(VGS.log("-- poll ["+VGS.Ajax.now()+"]","log"),VGS.Ajax.pollingDebugFirst=!1,VGS.Ajax.pollingDebugCount=0),VGS.Ajax.pollingDebugCount++,VGS.Ajax.serverTimeoutTime?VGS.Ajax.serverTimeoutTime<=VGS.Ajax.now()?(VGS.Ajax.stopPolling(),VGS.Ajax.failure("Server Timed Out")):null!=parent.triggerResponse&&parent.triggerResponse():VGS.Ajax.requestQueue.length>0?VGS.Ajax.requestQueue.length>10?(VGS.Ajax.failure("Queue size too big: "+VGS.Ajax.requestQueue.length+" requests! In order to avoid abuse and overload of the platform we allow max 10 requests in the queue."),VGS.Ajax.stopPolling()):VGS.Ajax.makeRequest():VGS.Ajax.stopPolling()},removeScriptObject:function(){VGS.log("VGS.Ajax.removeScriptObject()","log"),VGS.Ajax.scriptObject.parentNode.removeChild(VGS.Ajax.scriptObject),VGS.Ajax.scriptObject=null},requestQueueNode:function(a){VGS.log('VGS.Ajax.requestQueueNode("'+a+'")',"log"),this.connectionUrl=a,this.requestSent=!1},responseReceived:function(){VGS.log("VGS.Ajax.responseReceived()","log"),VGS.processing("off"),VGS.Ajax.requestQueue.shift(),VGS.Ajax.serverTimeoutTime=null,VGS.Ajax.removeScriptObject()},send:function(a){VGS.log('VGS.Ajax.send("'+a+'")',"log"),VGS.Ajax.buildConnectionUrl(a),VGS.Ajax.startPolling()},startPolling:function(){VGS.log("VGS.Ajax.startPolling()","log"),null==VGS.Ajax.interval&&(VGS.log("polling (re)started"),VGS.Ajax.connections[VGS.Ajax.connectionId]=null,VGS.Ajax.poll(),VGS.Ajax.interval=window.setInterval(function(){VGS.Ajax.connections[VGS.Ajax.connectionId]=null,VGS.Ajax.poll()},VGS.Ajax.intervalPeriod))},stopPolling:function(){VGS.log("VGS.Ajax.stopPolling()","log"),VGS.Ajax.serverTimeoutTime=null,VGS.Ajax.flushQueue(),VGS.Ajax.interval&&window.clearInterval(VGS.Ajax.interval),VGS.Ajax.interval=null},success:function(a){a.success?VGS.log("SUCCESS: "+a.success,"log"):a.error&&(VGS.log("ERROR: "+a.error,"log"),VGS.Event&&VGS.Event.fire("VGS.error",{type:"response",code:400,description:a.error}))},loadingError:function(){VGS.log("VGS.Ajax.loadingError()","log"),VGS.Ajax.stopPolling(),VGS.Ajax.failure("Server Timed Out")}},Cookie:{enabled:!0,name:"",domain:"",decode:function(a){return JSON.parse(window.unescape(a))},encode:function(a){return window.escape(JSON.stringify(a))},set:function(a){return VGS.log("VGS.Cookie.set()","log"),a?(VGS.Cookie.setRaw(VGS.Cookie.encode(a),a.expiresIn,a.baseDomain,VGS.Cookie.name),a.sp_id&&(VGS._varnish_expiration||(VGS._varnish_expiration=a.expiresIn),VGS.Cookie.setRaw(a.sp_id,VGS._varnish_expiration,a.baseDomain,"SP_ID"))):VGS.Cookie.clear(),a},get:function(){VGS.log("VGS.Cookie.get() -- "+VGS.Cookie.name,"log");var a,b,c,d=null;c=VGS.Cookie.name+"=",d=document.cookie.split(";");for(var e=0;e<d.length;e++){for(var f=d[e];" "===f.charAt(0);)f=f.substring(1,f.length);0===f.indexOf(c)&&(a=f.substring(c.length,f.length))}return a&&(b=VGS.Cookie.decode(a),b.expiresIn=parseInt(b.expiresIn,10),b.clientTime=parseInt(b.clientTime,10),VGS.Cookie.domain=b.baseDomain),b},setRaw:function(a,b,c,d){VGS.log("VGS.Cookie.setRaw(val, "+b+", "+c+", "+d+")","log");var e="";if("undefined"==typeof d&&(d=VGS.Cookie.name),VGS.Cookie.domain=c,"undefined"!=typeof b){var f=new Date;f.setTime(f.getTime()+1e3*b),e="; expires="+f.toGMTString(),document.cookie=d+"="+a+e+"; path=/"+(c?"; domain=."+c:"")}else VGS.log("VGS.Cookie.setRaw() expiration is invalid:"+b+", no cookie set)","log")},clear:function(){VGS.log("VGS.Cookie.clear() "+VGS.Cookie.name,"log"),VGS.Cookie.setRaw("",0,VGS.Cookie.domain),VGS.log("VGS.Cookie.clear() SP_ID","log"),VGS.Cookie.setRaw("",0,VGS.Cookie.domain,"SP_ID")}},Auth:{valid:!1,logout:function(a){VGS.log("VGS.Auth.logout","log"),VGS.Auth.setSession(null,"unknown");var b="";"function"==typeof a&&(b=VGS.guid(),VGS.callbacks[b]=a),VGS.Ajax.send("ajax/logout.js?callback="+b)},validate:function(a){VGS.log("VGS.Auth.validate","log"),VGS.Auth.valid=!1,VGS.log(a,"log"),a.result?("undefined"!=typeof a.visitor&&VGS.Event.fire("auth.visitor",a.visitor),VGS.Auth.valid=a.result,VGS.log("SUCCESS: "+VGS.Auth.valid,"log"),VGS.Auth.valid&&"undefined"!=typeof a.userId?(VGS.log("-- valid session, allow login","log"),VGS.Auth.setSession(a,"undefined"!=typeof a.userStatus?a.userStatus:"unknown")):(VGS.log("-- invalid session, do not allow login","log"),VGS.Auth.setSession(null,"unknown"))):a.error&&a.response?("undefined"!=typeof a.response.visitor&&VGS.Event.fire("auth.visitor",a.response.visitor),"LoginException"===a.error.type?(VGS.log(a.error,"log"),VGS.Event.fire("VGS.loginException",a)):(VGS.log(a.error,"error"),VGS._cache_notloggedin?(a.response.expiresIn=parseInt(VGS._refresh_timeout,10)/1e3,VGS.Auth.setSession(a.response,"unknown")):VGS.Auth.setSession(null,"unknown"))):(VGS.log(a,"error"),VGS.Auth.setSession(null,"unknown"))},setSession:function(a,b){VGS.log("VGS.Auth.setSession ("+typeof a+" , "+b+")","log");var c=!1,d=!1;"object"==typeof a&&null!==a&&a.hasOwnProperty("userId")&&(c=!0),"object"==typeof VGS._session&&null!==VGS._session&&VGS._session.hasOwnProperty("userId")&&(d=!0);var e=!d&&c,f=d&&!c,g=!d&&!c,h=d&&c&&VGS._session.id!==a.id,i=e||f||d&&c&&VGS._session.sig!==a.sig||g,j=b!==VGS._userStatus,k={session:a,status:b};return"object"==typeof a&&null!==a&&(a.clientTime=parseInt(VGS.Ajax.now(),10)),VGS._session=a,VGS._userStatus=b,i&&VGS.Cookie.enabled&&VGS.Cookie.set(a),g&&VGS.Event.fire("auth.notLoggedin",k),j&&VGS.Event.fire("auth.statusChange",k),(f||h)&&VGS.Event.fire("auth.logout",k),(e||h)&&VGS.Event.fire("auth.login",k),i&&VGS.Event.fire("auth.sessionChange",k),h&&VGS.Event.fire("auth.userChange",k),c&&!VGS._sessionInitiated&&(VGS._sessionInitiated=!0,VGS.Event.fire("auth.sessionInit",k)),VGS.Auth._refreshTimer&&(window.clearTimeout(VGS.Auth._refreshTimer),delete VGS.Auth._refreshTimer),VGS.Auth._loadState&&a&&a.expiresIn&&(VGS.log("--  refresh every "+VGS._refresh_timeout+" milliseconds","log"),VGS.Auth._refreshTimer=window.setTimeout(function(){VGS.getLoginStatus(null,!0)},VGS._refresh_timeout)),k}},getSession:function(){return VGS.log("VGS.getSession","log"),VGS._session},getLoginStatus:function(a,b){if(VGS.log("VGS.getLoginStatus("+a+","+b+")","log"),!VGS.client_id)return void VGS.log("ERROR: VGS.getLoginStatus() called before calling VGS.init().","error");b=b===!0;var c;if(a){if(!b&&"loaded"===VGS.Auth._loadState)return VGS.log("VGS.getLoginStatus(): status has already been loaded! "+VGS.Auth._loadState,"log"),void a({status:VGS._userStatus,session:VGS._session});VGS.log("VGS.Event.subscribe(VGS.loginStatus) "+VGS.Auth._loadState,"log"),"function"==typeof a?(c=VGS.guid(),VGS.callbacks[c]=a,VGS.Event.subscribe("VGS.loginStatus",VGS.callbacks[c])):VGS.Event.subscribe("VGS.loginStatus",a)}if(!b&&"loading"===VGS.Auth._loadState)return void VGS.log("VGS.getLoginStatus() already loading, returning..."+VGS.Auth._loadState,"log");VGS.Auth._loadState="loading";var d=function(a){VGS.log("VGS.callbacks -- "+VGS.Auth._loadState,"log"),VGS.Auth._loadState="loaded",VGS.Auth.validate(a),VGS.Event.fire("VGS.loginStatus",a),VGS.Event.clear("VGS.loginStatus")};c=VGS.guid(),VGS.callbacks[c]=d,VGS.Event.subscribe("VGS.loginException",function(){c=VGS.guid(),VGS.callbacks[c]=function(a){VGS.log("VGS.callbacks -- "+VGS.Auth._loadState,"log"),VGS.Auth._loadState="loaded",VGS.Auth.validate(a),VGS.Event.fire("VGS.loginStatus",a),VGS.Event.clear("VGS.loginStatus")},VGS.Event.clear("VGS.loginException"),VGS.Ajax.send("ajax/hasSession.js?callback="+c+"&autologin=1")}),VGS.Ajax.send(VGS.Ajax.sessionUrl+"?callback="+c)},hasProduct:function(a,b,c){if(VGS.log("VGS.hasProduct("+a+")","log"),!VGS.client_id)return void VGS.log("ERROR: VGS.hasProduct() called before calling VGS.init().","error");c=c===!0;var d=(new Date).getTime();if(VGS._cacheLastReset+VGS._refresh_timeout<d&&(VGS.log("VGS.hasProduct("+a+"): Cache timedout, forcing request.","log"),c=!0),!c&&"object"==typeof VGS.cachedResponses["prd_"+a]&&null!==VGS.cachedResponses["prd_"+a])return VGS.log("VGS.hasProduct("+a+"): Product cached.","log"),void b(VGS.cachedResponses["prd_"+a]);VGS.log("VGS.hasProduct("+a+"): Product NOT cached.","log");var e=function(c){VGS.cachedResponses["prd_"+a]=c,VGS._cacheLastReset=(new Date).getTime(),b(c)},f=VGS.guid();VGS.callbacks[f]=e,VGS.Ajax.send("ajax/hasproduct.js?product_id="+a+"&callback="+f)},hasSubscription:function(a,b,c){if(VGS.log("VGS.hasSubscription("+a+")","log"),!VGS.client_id)return void VGS.log("ERROR: VGS.hasSubscription() called before calling VGS.init().","error");c=c===!0;var d=(new Date).getTime();if(VGS._cacheLastReset+VGS._refresh_timeout<d&&(VGS.log("VGS.hasSubscription("+a+"): Cache timedout, forcing request.","log"),c=!0),!c&&"object"==typeof VGS.cachedResponses["sub_"+a]&&null!==VGS.cachedResponses["sub_"+a])return VGS.log("VGS.hasSubscription("+a+"): Product cached.","log"),void b(VGS.cachedResponses["sub_"+a]);VGS.log("VGS.hasSubscription("+a+"): Product NOT cached.","log");var e=function(c){VGS.cachedResponses["sub_"+a]=c,VGS._cacheLastReset=(new Date).getTime(),b(c)},f=VGS.guid();VGS.callbacks[f]=e,VGS.Ajax.send("ajax/hassubscription.js?product_id="+a+"&callback="+f)},setTraits:function(a,b){if(VGS.log("VGS.setTraits("+a+")","log"),!VGS.client_id)return void VGS.log("ERROR: VGS.setTraits() called before calling VGS.init().","error");var c=function(a){b(a)},d=VGS.guid();VGS.callbacks[d]=c,VGS.Ajax.send("ajax/traits.js?t="+a+"&callback="+d)},getLoginURI:function(a,b){var c={response_type:"code",flow:"signup",client_id:b||VGS.client_id,redirect_uri:encodeURIComponent(a||window.location.toString())};return VGS.Ajax.buildUrl("login",c)},getSignupURI:function(a,b){var c={response_type:"code",flow:"signup",client_id:b||VGS.client_id,redirect_uri:encodeURIComponent(a||window.location.toString())};return VGS.Ajax.buildUrl("signup",c)},getLogoutURI:function(a,b){var c={response_type:"code",client_id:b||VGS.client_id,redirect_uri:encodeURIComponent(a||window.location.toString())};return VGS.Ajax.buildUrl("logout",c)},getAccountURI:function(a,b){var c={response_type:"code",client_id:b||VGS.client_id,redirect_uri:encodeURIComponent(a||window.location.toString())};return VGS.Ajax.buildUrl("account/summary",c)},getPurchaseHistoryURI:function(a,b){var c={response_type:"code",client_id:b||VGS.client_id,redirect_uri:encodeURIComponent(a||window.location.toString())};return VGS.Ajax.buildUrl("account/purchasehistory",c)},getSubscriptionsURI:function(a,b){var c={response_type:"code",client_id:b||VGS.client_id,redirect_uri:encodeURIComponent(a||window.location.toString())};return VGS.Ajax.buildUrl("account/subscriptions",c)},getProductsURI:function(a,b){var c={response_type:"code",client_id:b||VGS.client_id,redirect_uri:encodeURIComponent(a||window.location.toString())};return VGS.Ajax.buildUrl("account/products",c)},getRedeemVoucherURI:function(a,b,c){var d={response_type:"code",client_id:c||VGS.client_id,redirect_uri:encodeURIComponent(b||window.location.toString()),voucher_code:a||null};return VGS.Ajax.buildUrl("account/redeem",d)},getPurchaseProductURI:function(a,b,c){var d={response_type:"code",flow:"payment",client_id:c||VGS.client_id,redirect_uri:encodeURIComponent(b||window.location.toString()),product_id:a||null};return VGS.Ajax.buildUrl("auth/start",d)},getPurchaseCampaignURI:function(a,b,c,d,e){var f={response_type:"code",flow:"payment",client_id:e||VGS.client_id,redirect_uri:encodeURIComponent(d||window.location.toString()),campaign_id:a||null,product_id:b||null,voucher_code:c||null};return VGS.Ajax.buildUrl("auth/start",f)},Event:{subscribers:function(){return this._subscribersMap||(this._subscribersMap={}),this._subscribersMap},subscribe:function(a,b){var c=this.subscribers();c[a]?c[a].push(b):c[a]=[b]},unsubscribe:function(a,b){var c=this.subscribers()[a];VGS.Array.forEach(c,function(a,d){a===b&&(c[d]=null)})},monitor:function(a,b){if(!b()){var c=this,d=function(){b.apply(b,arguments)&&c.unsubscribe(a,d)};this.subscribe(a,d)}},clear:function(a){delete this.subscribers()[a]},fire:function(){var a=Array.prototype.slice.call(arguments),b=a.shift();VGS.Array.forEach(this.subscribers()[b],function(c){c&&(VGS.log('VGS.Event.fire("'+b+'")',"log"),c.apply(this,a))})}},Array:{forEach:function(a,b,c){if(a)if("[object Array]"!==Object.prototype.toString.apply(a)&&(a instanceof Function||"number"!=typeof a.length))for(var d in a)(c||a.hasOwnProperty(d))&&b(a[d],d,a);else if(a.forEach)a.forEach(b);else for(var e=0,f=a.length;f>e;e++)b(a[e],e,a)}}};window.setTimeout(function(){"function"!=typeof window.vgsAsyncInit||window.vgsAsyncInit.hasRun||(window.vgsAsyncInit.hasRun=!0,window.vgsAsyncInit())},0);